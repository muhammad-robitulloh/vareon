# Vareon Dev Server - Replit config
# Menjalankan ekosistem hybrid (Python backend + Node frontend)

run = "python main.py"

language = "python3"
entrypoint = "main.py"

# Mengatur environment agar path Python & Node sinkron
[env]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "."
NODE_OPTIONS = "--max-old-space-size=256"

# Versi paket yang diinginkan
[packager]
language = "python3"
packageManager = "pip"

# Tahapan instalasi otomatis
[unitTests]
install = """
pip install -r server-python/requirements.txt
if [ -d client ]; then
  (npm ci --prefix client || npm install --prefix client)
fi
"""

# Setup untuk Replit Nix environment
[dependencies]
python = "3.11"
nodejs = "22"

# File untuk debugging (optional)
[debugger]
path = "main.py"
language = "python"
args = []

# Opsional: gunakan ini untuk mendefinisikan command custom di Shell Replit
[scripts]
start = "python main.py"
install = "pip install -r server-python/requirements.txt && (npm ci --prefix client || npm install --prefix client)"
